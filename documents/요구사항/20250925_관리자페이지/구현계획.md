# 관리자 페이지 구현 계획

## 1. 백엔드 보완
- [x] `PostsController`에서 인증 사용자 ID를 서비스로 전달하도록 수정
- [x] `PostsService` slug 생성 로직을 `@repo/shared` 유틸로 교체
- [ ] 포스트 생성/수정/삭제 후 카테고리/태그 `postCount` 갱신 처리 추가
- [ ] CSRF 토큰 검증 로직 강화(서명 검증 또는 토큰 저장소 확보)
- [ ] 변경된 로직에 대한 단위/통합 테스트 업데이트

## 2. 인증 & 토큰 파이프라인
- [ ] NextAuth JWT를 서버 컴포넌트/서버 액션에서 재사용할 수 있는 헬퍼 작성
- [ ] CSRF 토큰 발급 API 및 더블 서브밋 쿠키 전략 구현
- [ ] 토큰 만료/403 응답 시 재인증 UX 정의 및 처리 로직 추가

## 3. API 클라이언트 확장
- [ ] `lib/api-client.ts`에 POST/PUT/DELETE 메서드와 토큰/CSRF 주입 지원 추가
- [ ] 공통 에러 핸들링(401/403 자동 대응) 유틸 구현
- [ ] 관리자 CRUD를 위한 서버 액션 또는 mutation 훅 기본 구조 작성

## 4. 관리자 UI 기본 골격
- [ ] `/admin` 전용 레이아웃(사이드바, 헤더, 세션 경고) 구성
- [ ] 라우트 가드 및 접근 제어(`redirect` 또는 middleware) 적용
- [ ] 대시보드 초안(요약 위젯, 최근 초안 리스트) UI 제작

## 5. 포스트 관리 플로우
- [ ] `/admin/posts` 목록 페이지(검색, 필터, 페이지네이션)
- [ ] `/admin/posts/new` 작성 폼 + 실시간 미리보기
- [ ] `/admin/posts/[slug]/edit` 수정/삭제 플로우 및 발행 상태 토글
- [ ] 저장/삭제 성공·실패 토스트 및 로딩 상태 처리

## 6. 카테고리 & 태그 관리
- [ ] `/admin/categories` 관리 화면 + 생성/수정 모달
- [ ] `/admin/tags` 관리 화면 + 자동완성 기반 태그 선택
- [ ] 슬러그 자동 생성 + 중복 에러 메시지 표준화
- [ ] 카테고리 색상 HEX 입력 및 검증 로직 추가

## 7. 테스트 & 문서화
- [ ] 각 작업 완료 시 `pnpm build` 실행으로 컴파일 오류 여부 확인
- [ ] 주요 관리자 플로우 e2e 시나리오 초안(Playwright/Cypress)
- [ ] Swagger 문서에 관리자 예시 및 헤더 안내 추가
- [ ] 배포 전 체크리스트 업데이트(DB 마이그레이션, ENV 검증 등)

## 8. 완료 검증
- [ ] 로컬 환경에서 관리자 흐름 종합 점검
- [ ] QA 피드백 수집 및 수정 사항 반영
- [ ] 배포 태그/릴리스 노트 작성
